var lunrIndex,$results,pagesIndex,tinySegmenter;function initLunr(){return tinySegmenter=new lunr.TinySegmenter,new Promise((e,t)=>{var n=new XMLHttpRequest;n.open("GET","index.json",!0),n.onload=function(){if(n.status>=200&&n.status<400)pagesIndex=JSON.parse(n.responseText),console.log("index:",pagesIndex),lunrIndex=lunr(function(){this.use(lunr.ja),this.field("title",{boost:10}),this.field("categories"),this.field("tags"),this.field("description"),this.ref("href");for(var t=0;t<pagesIndex.length;++t)this.add(pagesIndex[t]);e()});else{var s=textStatus+", "+error;console.error("Error getting Hugo index flie:",s),t(s)}},n.send()})}function initUI(){$results=document.getElementById("results"),$search=document.getElementById("search"),$search.onkeyup=function(){for(;$results.firstChild;)$results.removeChild($results.firstChild);var e=$search.value,e=decodeURI(e),t=search(e);renderResults(t)}}function search(e){var t=tinySegmenter.segment(e),t=t.map(function(e){return e=e.trim(),e.length&&(e=`+*${e}*`),e});return e=t.join(" ").replace(/\s+/g," ").trim(),console.log("search:",e),lunrIndex.search(e).map(function(e){return pagesIndex.filter(function(t){return t.href===e.ref})[0]})}function renderResults(e){if(!e.length)return;$results=document.getElementById("results"),e.slice(0,10).forEach(function(e){var t,o,n=document.createElement("div"),s="";e.categories&&(s=`
                <a href="/categories/${e.categories}">
                    <i class="fas fa-folder"></i>&nbsp;${e.categories}
                </a>
            `),t="",e.tags&&(o=e.tags.map(function(e){return`
                    <li class="partials__tagList__item">
                        <a href="/tags/${e}" class="partials__tagList__itemLink">
                            <i class="fas fa-tag partials__tagList__itemIcon"></i>${e}
                        </a>
                    </li>
                `}),t=`
                <ul class="partials__tagList">
                    ${o.join("")}
                </ul>
            `),n.innerHTML=`
            <article class="partials__articleCard">
                <div class="partials__articleCard__inner">
                    <a href="${e.href}" class="partials__articleCard__link"></a>
                    <img src='${e.thumbnail}' alt="${e.title}" loading="lazy" class="partials__articleCard__thumbnail">
                    <h4 class="partials__articleCard__title">
                        ${e.title}
                    </h4>
                    <div class="partials__articleCard__detail">
                        ${s}
                        <div class="partials__articleCard__detail__center"></div>
                        <div>
                            <i class="fas fa-clock"></i>&nbsp;${e.lastmod}
                        </div>
                    </div>
                    ${t}
                    <div class="partials__articleCard__description">
                        ${e.summary}
                    </div>
                </div>
            </article>
        `,$results.appendChild(n)})}initLunr().then(function(){var e=getQuery().query||"",e=decodeURI(e),t=search(e);renderResults(t),e.length&&(document.getElementById("list-title").innerText=`「${e}」を検索`)}),document.addEventListener("DOMContentLoaded",function(){});function getQuery(){var e=window.location.search,e=e.slice(1),t={};return e.split("&").forEach(function(e){const n=e.split("=");t[n[0]]=n[1]}),t}